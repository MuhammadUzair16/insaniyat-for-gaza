{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="carousel">
    <div class="container-fluid">
        <div class="owl-carousel">
            <div class="carousel-item">
                <div class="carousel-img">
                    <img src="{% static 'img/Gaza.jpeg' %}" alt="Image">
                </div>
                <div class="carousel-text">
                    <h1>Together, we can bring hope to Gaza.</h1>
                    <p>آئیں مل کر غزہ میں امید کی کرن بنیں۔</p>
                    <p>معًا يمكننا أن نجلب الأمل إلى غزة۔</p>

                    <div class="carousel-btn">
                        <a class="btn btn-custom" href="">Donate Now</a>
                        <a class="btn btn-custom btn-play" data-toggle="modal" data-src="https://www.youtube.com/embed/DWRcNpR6Kdc" data-target="#videoModal">Watch Video</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="carousel-img">
                    <img src="{% static 'img/Gaza-2.jpeg' %}" alt="Image">
                </div>
                <div class="carousel-text">
                    <h1>Your donation can save a life in Gaza.</h1>
                    <p>آپ کا عطیہ غزہ میں ایک جان بچا سکتا ہے۔</p>
                       <p>تبرعك يمكن أن ينقذ حياة في غزة.</p>
                    <div class="carousel-btn">
                        <a class="btn btn-custom" href="">Donate Now</a>
                        <a class="btn btn-custom btn-play" data-toggle="modal" data-src="https://www.youtube.com/embed/DWRcNpR6Kdc" data-target="#videoModal">Watch Video</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="carousel-img">
                    <img src="{% static 'img/Gaza-3.jpeg' %}" alt="Image">
                </div>
                <div class="carousel-text">
                    <h1>Feed a starving child in Gaza today.</h1>
                    <p>آج ہی غزہ کے بھوکے بچے کو کھانا دیں۔</p>
                    <p>أطعم طفلًا جائعًا في غزة اليوم</p>

                    <div class="carousel-btn">
                        <a class="btn btn-custom" href="">Donate Now</a>
                        <a class="btn btn-custom btn-play" data-toggle="modal" data-src="https://youtu.be/4aelpXuOVPg?si=4h2fMKjBpxQ3JyeK" data-target="#videoModal">Watch Video</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Video Modal Start-->
<div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <!-- 16:9 aspect ratio -->
                <div class="embed-responsive embed-responsive-16by9">
                    <iframe class="embed-responsive-item" src="" id="video" allow="autoplay"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Video Modal End -->

<div class="about">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="about-img" data-parallax="scroll" data-image-src="{{ about_section.image.url }}"></div>
            </div>
            <div class="col-lg-6">
                <div class="section-header">
                    <p>Learn About Us</p>
                    <h2>{{ about_section.title }}</h2>
                </div>
                <div class="about-tab">
                    <ul class="nav nav-pills nav-justified">
                        {% for tab in about_section.tabs.all %}
                        <li class="nav-item">
                            <a class="nav-link {% if tab.is_active %}active{% endif %}"
                               data-toggle="pill" href="#tab-content-{{ forloop.counter }}">
                                {{ tab.get_tab_type_display }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>

                    <div class="tab-content">
                        {% for tab in about_section.tabs.all %}
                        <div id="tab-content-{{ forloop.counter }}"
                             class="container tab-pane {% if tab.is_active %}active{% else %}fade{% endif %}">
                            {{ tab.content|safe }}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- About End -->

<!-- Service Start -->
<div class="service">
    <div class="container">
        <div class="section-header text-center">
            <p>What We Do?</p>
            <h2>We believe that we can save more lifes with you</h2>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-diet"></i>
                    </div>
                    <div class="service-text">
                        <h3>Healthy Food</h3>
                        <p>Nutritious meals are vital for families in Gaza to combat malnutrition and maintain strength during these difficult times.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-water"></i>
                    </div>
                    <div class="service-text">
                        <h3>Pure Water</h3>
                        <p>Access to clean drinking water is critical to prevent waterborne diseases and ensure the health of vulnerable communities.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-healthcare"></i>
                    </div>
                    <div class="service-text">
                        <h3>Health Care</h3>
                        <p>Emergency medical aid and healthcare services are urgently needed to treat injuries and save lives in war-torn Gaza.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-education"></i>
                    </div>
                    <div class="service-text">
                        <h3>Primary Education</h3>
                        <p>Safe learning spaces and educational support help children continue their schooling despite displacement and conflict</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-home"></i>
                    </div>
                    <div class="service-text">
                        <h3>Residence Facilities</h3>
                        <p>Shelter and safe housing are essential for families who have lost their homes due to bombings and destruction.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="flaticon-social-care"></i>
                    </div>
                    <div class="service-text">
                        <h3>Social Care</h3>
                        <p>Psychological support and community aid help traumatized individuals heal and rebuild their lives after war.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Service End -->

<!-- Facts Start -->
<!-- Facts Start -->
<div class="facts" data-parallax="scroll" data-image-src="{% static 'img/Gaza-facts.jpeg' %}">
    <div class="container">
        <div class="row">
            {% for fact in facts %}
            <div class="col-lg-3 col-md-6">
                <div class="facts-item">
                    <i class="{{ fact.icon_class }}"></i>
                    <div class="facts-text">
                        <h3 class="{% if fact.is_money %}facts-dollar{% else %}facts-plus{% endif %}"
                            data-toggle="counter-up">{{ fact.count }}</h3>
                        <p>{{ fact.label }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Causes Start -->
<div class="causes">
    <div class="container">
        <div class="section-header text-center">
            <p>Popular Causes</p>
            <h2>Let's know about charity causes around the world</h2>
        </div>
        <div class="owl-carousel causes-carousel">
            {% for cause in causes %}
            <div class="causes-item">
                <div class="causes-img">
                    <img src="{{ cause.image.url }}" alt="{{ cause.title }}">
                </div>
                <div class="causes-progress">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width:{{ cause.progress }}%" aria-valuenow="{{ cause.progress }}" aria-valuemin="0" aria-valuemax="100">
                            <span>{{ cause.progress }}%</span>
                        </div>
                    </div>
                    <div class="progress-text">
                        <p><strong>Raised:</strong> ${{ cause.raised_amount }}</p>
                        <p><strong>Goal:</strong> ${{ cause.goal_amount }}</p>
                    </div>
                </div>
                <div class="causes-text">
                    <h3>{{ cause.title }}</h3>
                    <p>{{ cause.description }}</p>
                </div>
                <div class="causes-btn">
                    <a href="{% url 'causes:cause_detail' slug=cause.slug %}" class="btn btn-custom">Learn More</a>
                    <a href="#" class="btn btn-custom">Donate Now</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Causes End -->

<!-- Donate Start -->
<div class="donate" data-parallax="scroll" data-image-src="{% static 'img/donate.jpg' %}">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <div class="donate-content">
                    <div class="section-header">
                        <p>Donate Now</p>
                        <h2>Let's donate to needy people for better lives</h2>
                    </div>
                    <div class="donate-text">
                        <p>
                            Lorem ipsum dolor sit amet elit. Phasellus nec pretium mi. Curabitur facilisis ornare velit non. Aliquam metus tortor, auctor id gravida, viverra quis sem. Curabitur non nisl nec nisi maximus. Aenean convallis porttitor. Aliquam interdum at lacus non blandit.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="donate-form">
                    <form>
                        <div class="control-group">
                            <input type="text" class="form-control" placeholder="Name" required="required" />
                        </div>
                        <div class="control-group">
                            <input type="email" class="form-control" placeholder="Email" required="required" />
                        </div>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-custom active">
                                <input type="radio" name="options" checked> $10
                            </label>
                            <label class="btn btn-custom">
                                <input type="radio" name="options"> $20
                            </label>
                            <label class="btn btn-custom">
                                <input type="radio" name="options"> $30
                            </label>
                        </div>
                        <div>
                            <button class="btn btn-custom" type="submit">Donate Now</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Donate End -->

<!-- Event Start -->
<div class="event">
    <div class="container">
        <div class="section-header text-center">
            <p>Upcoming Events</p>
            <h2>Be ready for our upcoming charity events</h2>
        </div>
        <div class="row">
            {% for event in events %}
            <div class="col-lg-6">
                <div class="event-item">
                    <img src="{{ event.image.url }}" alt="{{ event.title }}">
                    <div class="event-content">
                        <div class="event-meta">
                            <p><i class="fa fa-calendar-alt"></i>{{ event.date|date:"d-M-y" }}</p>
                            <p><i class="far fa-clock"></i>{{ event.start_time|time:"g:i A" }} - {{ event.end_time|time:"g:i A" }}</p>
                            <p><i class="fa fa-map-marker-alt"></i>{{ event.location }}</p>
                        </div>
                        <div class="event-text">
                            <h3>{{ event.title }}</h3>
                            <p>{{ event.description|truncatewords:5 }}</p>
                            <a class="btn btn-custom" href="{% url 'events:event_detail' event.slug %}">Join Now</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Event End -->

<!-- Team Start -->
<div class="team">
    <div class="container">
        <div class="section-header text-center">
            <p>Meet Our Team</p>
            <h2>Gaza's heroes saving lives every day</h2>
        </div>
        <div class="row">
            {% for member in team_members %}
            <div class="col-lg-3 col-md-6">
                <div class="team-item">
                    <div class="team-img">
                        <img src="{{ member.image.url }}" alt="{{ member.name }}">
                    </div>
                    <div class="team-text">
                        <h2>{{ member.name }}</h2>
                        <p>{{ member.position }}</p>
                        <div class="team-social">
                            {% if member.twitter %}
                            <a href="{{ member.twitter }}"><i class="fab fa-twitter"></i></a>
                            {% endif %}
                            {% if member.facebook %}
                            <a href="{{ member.facebook }}"><i class="fab fa-facebook-f"></i></a>
                            {% endif %}
                            {% if member.linkedin %}
                            <a href="{{ member.linkedin }}"><i class="fab fa-linkedin-in"></i></a>
                            {% endif %}
                            {% if member.instagram %}
                            <a href="{{ member.instagram }}"><i class="fab fa-instagram"></i></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Volunteer Start -->
<!-- Volunteer Start -->
<div class="volunteer" data-parallax="scroll" data-image-src="{% static 'img/volunteer.png' %}">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-5">
                <div class="volunteer-form">
                    <form id="volunteerForm" method="post" action="{% url 'volunteer:volunteer' %}">
                        {% csrf_token %}
                        <div class="control-group">
                            <input type="text" class="form-control" id="id_name" name="name" placeholder="Name" required>
                            <div class="invalid-feedback" id="name-error"></div>
                        </div>
                        <div class="control-group">
                            <input type="email" class="form-control" id="id_email" name="email" placeholder="Email" required>
                            <div class="invalid-feedback" id="email-error"></div>
                        </div>
                        <div class="control-group">
                            <textarea class="form-control" id="id_motivation" name="motivation" placeholder="Why you want to become a volunteer?" required></textarea>
                            <div class="invalid-feedback" id="motivation-error"></div>
                        </div>
                        <div>
                            <button class="btn btn-custom" type="submit">Become a volunteer</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="volunteer-content">
                    <div class="section-header">
                        <p>Become A Volunteer</p>
                        <h2>Let's make a difference in the lives of others</h2>
                    </div>
                    <div class="volunteer-text">
                        <p>
                            Join our team of dedicated volunteers and help us provide essential services to those in need.
                            Your time and skills can change lives in our community.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Volunteer End -->

<!-- Success Message Container -->
<div id="volunteerSuccessMessage" style="display: none; position: fixed; top: 20px; right: 20px; padding: 15px 25px; background-color: #FDBE33; color: white; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 9999; opacity: 0; transition: opacity 0.5s ease-in-out;"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('volunteerForm');
    const successMessage = document.getElementById('volunteerSuccessMessage');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        let isValid = true;

        // Clear previous errors
        document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
        document.querySelectorAll('.invalid-feedback').forEach(el => el.textContent = '');

        // Validate required fields
        ['name', 'email', 'motivation'].forEach(field => {
            const input = document.getElementById(`id_${field}`);
            const errorElement = document.getElementById(`${field}-error`);

            if (!input.value.trim()) {
                input.classList.add('is-invalid');
                if (errorElement) {
                    errorElement.textContent = 'This field is required';
                }
                isValid = false;
            }
        });

        // Validate email format
        const email = document.getElementById('id_email');
        const emailError = document.getElementById('email-error');
        if (email.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
            email.classList.add('is-invalid');
            if (emailError) {
                emailError.textContent = 'Please enter a valid email';
            }
            isValid = false;
        }

        if (isValid) {
            const formData = new FormData(form);

            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    // Update and show success message
                    successMessage.textContent = data.message || 'Thank you for volunteering! We will contact you soon.';
                    successMessage.style.display = 'block';
                    setTimeout(() => successMessage.style.opacity = '1', 10);

                    // Reset form
                    form.reset();

                    // Hide message after 2 seconds with fade out
                    setTimeout(() => {
                        successMessage.style.opacity = '0';
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                        }, 500);
                    }, 2000);
                } else if (data.errors) {
                    // Handle server-side validation errors
                    Object.entries(data.errors).forEach(([field, errors]) => {
                        const input = document.getElementById(`id_${field}`);
                        const errorElement = document.getElementById(`${field}-error`);
                        if (input && errorElement) {
                            input.classList.add('is-invalid');
                            errorElement.textContent = errors[0].message;
                        }
                    });
                }
            })
            .catch(error => {
                console.error('Error:', error);
                successMessage.textContent = 'An error occurred. Please try again.';
                successMessage.style.backgroundColor = '#dc3545';
                successMessage.style.display = 'block';
                setTimeout(() => successMessage.style.opacity = '1', 10);
                setTimeout(() => {
                    successMessage.style.opacity = '0';
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                        successMessage.style.backgroundColor = '#FDBE33';
                    }, 500);
                }, 3000);
            });
        }
    });
});
</script>
<!-- Volunteer End -->

<!-- Testimonial Start -->
<div class="testimonial">
    <div class="container">
        <div class="section-header text-center">
            <p>Voices from Gaza</p>
            <h2>What people say about our work</h2>
        </div>
        <div class="owl-carousel testimonials-carousel">
            {% for testimonial in testimonials %}
            <div class="testimonial-item">
                <div class="testimonial-profile">
                    <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}">
                    <div class="testimonial-name">
                        <h3>{{ testimonial.name }}</h3>
                        <p>{{ testimonial.profession }}</p>
                    </div>
                </div>
                <div class="testimonial-text">
                    {{ testimonial.content|safe }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Contact Start -->
<!-- Add this section where you want the contact form to appear in home.html -->
<div class="contact-section" style="margin-top: 50px;">
    <div class="container">
        <div class="section-header text-center text-white mb-5">
            <p class="text-uppercase">Get In Touch</p>
            <h2 class="display-5 fw-bold" style="color: #FFD700">Contact us anytime</h2>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-6">
                <div class="contact-form-container p-4 p-md-5 shadow-lg">
                    <form method="post" id="homeContactForm" class="needs-validation" novalidate>
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="home_id_name" name="name" placeholder="Your Name" required>
                                    <label for="home_id_name"></label>
                                    <div class="invalid-feedback" id="home_name-error"></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="home_id_email" name="email" placeholder="Your Email" required>
                                    <label for="home_id_email"></label>
                                    <div class="invalid-feedback" id="home_email-error"></div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="home_id_subject" name="subject" placeholder="Subject" required>
                                    <label for="home_id_subject"></label>
                                    <div class="invalid-feedback" id="home_subject-error"></div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating mb-4">
                                    <textarea class="form-control" id="home_id_message" name="message" style="height: 150px" placeholder="Message" required></textarea>
                                    <label for="home_id_message"></label>
                                    <div class="invalid-feedback" id="home_message-error"></div>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button class="btn btn-custom" type="submit">
                                    <i class="far fa-paper-plane me-2"></i> Send Message
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Success Message Container -->
<div id="homeContactSuccessMessage" style="display: none; position: fixed; top: 20px; right: 20px; padding: 15px 25px; background-color: #FDBE33; color: white; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 9999; opacity: 0; transition: opacity 0.5s ease-in-out;"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('homeContactForm');
    const successMessage = document.getElementById('homeContactSuccessMessage');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        let isValid = true;

        // Clear previous errors
        document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
        document.querySelectorAll('.invalid-feedback').forEach(el => el.textContent = '');

        // Validate each field
        ['name', 'email', 'subject', 'message'].forEach(field => {
            const input = document.getElementById(`home_id_${field}`);
            const errorElement = document.getElementById(`home_${field}-error`);

            if (!input.value.trim()) {
                input.classList.add('is-invalid');
                if (errorElement) {
                    errorElement.textContent = 'This field is required';
                }
                isValid = false;
            }
        });

        // Validate email format
        const email = document.getElementById('home_id_email');
        const emailError = document.getElementById('home_email-error');
        if (email.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
            email.classList.add('is-invalid');
            if (emailError) {
                emailError.textContent = 'Please enter a valid email';
            }
            isValid = false;
        }

        if (isValid) {
            const formData = new FormData(form);

            fetch("{% url 'contact:contact' %}", {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    // Update and show success message
                    successMessage.textContent = data.message || 'Your message has been sent successfully!';
                    successMessage.style.display = 'block';
                    setTimeout(() => successMessage.style.opacity = '1', 10);

                    // Reset form
                    form.reset();

                    // Hide message after 2 seconds with fade out
                    setTimeout(() => {
                        successMessage.style.opacity = '0';
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                        }, 500);
                    }, 2000);
                } else if (data.errors) {
                    // Handle server-side validation errors
                    Object.entries(data.errors).forEach(([field, errors]) => {
                        const input = document.getElementById(`home_id_${field}`);
                        const errorElement = document.getElementById(`home_${field}-error`);
                        if (input && errorElement) {
                            input.classList.add('is-invalid');
                            errorElement.textContent = errors[0].message;
                        }
                    });
                }
            })
            .catch(error => {
                console.error('Error:', error);
                successMessage.textContent = 'An error occurred. Please try again.';
                successMessage.style.backgroundColor = '#dc3545';
                successMessage.style.display = 'block';
                setTimeout(() => successMessage.style.opacity = '1', 10);
                setTimeout(() => {
                    successMessage.style.opacity = '0';
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                        successMessage.style.backgroundColor = '#FDBE33';
                    }, 500);
                }, 3000);
            });
        }
    });
});
</script>

<style>
.contact-section {
    position: relative;
    padding: 80px 0;
    background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                url('{% static "img/contact.png" %}');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: white;
    margin-bottom: 50px;
}
</style>

<div class="blog">
    <div class="container">
        <div class="section-header text-center">
            <p>Latest Updates</p>
            <h2>Recent News & Stories</h2>
        </div>
        <div class="row">
            {% for post in blog_post|slice:":3" %}
            <div class="col-lg-4">
                <div class="blog-item">
                    <div class="blog-img">
                        <a href="{% url 'blog:post_detail' post.slug %}">
                             <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="img-fluid">
                        </a>
                         <div class="meta-date">
                            <p class="mb-0 text-muted small">{{ post.created_at|date:"F d, Y" }}</p>
                        </div>
                    </div>


                    <div class="blog-text">
                        <h3><a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a></h3>
                        <p>{{ post.excerpt|default:post.content|truncatewords:20 }}</p>
                    </div>
                    <div class="blog-meta">
                        <p><i class="fa fa-user"></i><a href="#">{{ post.author.username }}</a></p>
                        <p><i class="fa fa-comments"></i><a href="{% url 'blog:post_detail' post.slug %}#comments">
                            {{ post.comments.count }} Comment{{ post.comments.count|pluralize }}</a></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="row">
            <div class="col-12 text-center">
                <a href="{% url 'blog:blog_list' %}" class="btn btn-custom">View All Posts</a>
            </div>
        </div>
    </div>
</div>
<!-- Blog End -->
<!-- Blog End -->

{% endblock %}